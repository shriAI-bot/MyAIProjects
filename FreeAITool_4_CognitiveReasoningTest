<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognitive Ability Mock Test Tool</title>
    <style>
        :root {
            --primary-color: #4285F4; /* Blue */
            --correct-color: #34A853; /* Green */
            --incorrect-color: #EA4335; /* Red */
            --background-color: #F8F9FA;
            --text-color: #202124;
            --light-text-color: #5f6368;
            --border-color: #DADCE0;
            --white-color: #FFFFFF;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background-color: var(--white-color);
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            overflow: hidden;
        }

        .screen {
            padding: 30px 40px;
        }

        /* Welcome Screen */
        #welcome-screen h1 {
            color: var(--primary-color);
            text-align: center;
        }
        #welcome-screen p, #welcome-screen li {
            line-height: 1.6;
            color: var(--light-text-color);
        }
        .disclaimer-box {
            background-color: #fef7e0;
            border: 1px solid #fde293;
            border-radius: 4px;
            padding: 15px;
            margin: 20px 0;
            font-size: 0.9em;
        }
        .disclaimer-ack {
            margin-top: 20px;
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        .disclaimer-ack input {
            margin-right: 10px;
        }

        /* Quiz Screen */
        #quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }
        #progress-indicator, #timer {
            font-size: 1.1em;
            font-weight: 500;
        }
        #timer {
            color: var(--primary-color);
        }
        #question-text {
            font-size: 1.4em;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        #options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        .option-btn {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 1em;
            text-align: left;
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
        }
        .option-btn:hover {
            background-color: #e8f0fe;
            border-color: var(--primary-color);
        }
        .option-btn.selected {
            background-color: var(--primary-color);
            color: var(--white-color);
            border-color: var(--primary-color);
        }
        #quiz-footer {
            margin-top: 30px;
            text-align: right;
        }

        /* Report Screens */
        .report-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .report-header h2 {
            margin-bottom: 5px;
        }
        .report-header .score {
            font-size: 2.5em;
            font-weight: bold;
        }
        .report-header .status-pass {
            color: var(--correct-color);
        }
        .report-header .status-fail {
            color: var(--incorrect-color);
        }
        .report-section {
            margin-bottom: 30px;
        }
        .report-section h3 {
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 8px;
            margin-bottom: 15px;
        }
        .category-performance {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .category-item {
            background: var(--background-color);
            padding: 15px;
            border-radius: 5px;
        }
        .category-item span {
            font-weight: bold;
        }
        .incorrect-review-item {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        .incorrect-review-item p { margin: 5px 0; }
        .incorrect-review-item .q-text { font-weight: bold; }
        .incorrect-review-item .your-answer { color: var(--incorrect-color); }
        .incorrect-review-item .correct-answer { color: var(--correct-color); }
        .incorrect-review-item .explanation {
            background: #e6f4ea;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-style: italic;
        }
        #final-report-summary table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }
        #final-report-summary th, #final-report-summary td {
            padding: 12px;
            border: 1px solid var(--border-color);
        }
        #final-report-summary th {
            background-color: var(--background-color);
        }
        .advice-box {
            background-color: #e8f0fe;
            border: 1px solid #c5d9fa;
            border-radius: 4px;
            padding: 15px;
            font-size: 1.05em;
        }
        .bottom-disclaimer {
            text-align: center;
            font-size: 0.8em;
            color: var(--light-text-color);
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        /* General UI Elements */
        .btn {
            padding: 12px 25px;
            font-size: 1em;
            font-weight: 500;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: var(--primary-color);
            color: var(--white-color);
            transition: background-color 0.2s;
        }
        .btn:hover:not(:disabled) {
            background-color: #1a73e8;
        }
        .btn:disabled {
            background-color: #a0c3ff;
            cursor: not-allowed;
        }
        .center-btn {
            display: block;
            margin: 20px auto 0 auto;
        }

        .hidden {
            display: none !important;
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .screen {
                padding: 20px 15px;
            }
            #question-text {
                font-size: 1.2em;
            }
            #quiz-header {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
                text-align: center;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen">
            <h1>Cognitive Ability & Logical Reasoning Mock Test</h1>
            <p>Welcome! This tool is designed to help you practice for cognitive ability tests.</p>
            <p>You will complete a series of <strong>3 exams</strong>, each containing <strong>50 questions</strong> and lasting <strong>15 minutes</strong>.</p>
            <ul>
                <li>The question bank contains 150 unique questions across 5 categories.</li>
                <li>Each exam pulls a random, unique set of 50 questions.</li>
                <li>No question will be repeated across the three exams in a single session.</li>
                <li>Once you submit an answer, you cannot go back.</li>
                <li>The exam will auto-submit when the timer runs out.</li>
            </ul>
            <div class="disclaimer-box">
                <strong>Disclaimer:</strong> The content in this tool is generated by an artificial intelligence model and is for practice purposes only. AI models can make mistakes and may produce inaccurate information or incorrect answers. You must independently verify all information. The developer of this tool accepts no liability for any decisions made based on its content.
            </div>
            <label class="disclaimer-ack">
                <input type="checkbox" id="disclaimer-checkbox">
                I have read and acknowledge the disclaimer.
            </label>
            <button id="start-exam-btn" class="btn center-btn" disabled>Start Exam 1</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="screen hidden">
            <div id="quiz-header">
                <span id="progress-indicator">Question 1 / 50</span>
                <span id="exam-title">Exam 1</span>
                <span id="timer">15:00</span>
            </div>
            <div id="quiz-body">
                <p id="question-text">This is a sample question. What is 2+2?</p>
                <div id="options-container">
                    <!-- Options will be dynamically inserted here -->
                </div>
            </div>
            <div id="quiz-footer">
                <button id="next-question-btn" class="btn">Next</button>
            </div>
        </div>

        <!-- Exam Report Screen -->
        <div id="exam-report-screen" class="screen hidden">
            <div class="report-header">
                <h2 id="report-title">Exam 1 Report</h2>
                <div id="report-score" class="score">42 / 50</div>
                <div id="report-status" class="status-pass">Pass</div>
            </div>

            <div class="report-section">
                <h3>Performance by Category</h3>
                <div id="category-performance-container" class="category-performance">
                    <!-- Category performance will be dynamically inserted here -->
                </div>
            </div>

            <div id="incorrect-review-section" class="report-section">
                <h3>Incorrect Answers Review</h3>
                <div id="incorrect-answers-container">
                    <!-- Incorrect answers will be dynamically inserted here -->
                </div>
            </div>

            <button id="next-action-btn" class="btn center-btn">Start Next Exam</button>
            <div class="bottom-disclaimer">
                Disclaimer: Results and explanations are generated by an AI and are for informational purposes only. Please verify any information that seems incorrect.
            </div>
        </div>
        
        <!-- Final Report Screen -->
        <div id="final-report-screen" class="screen hidden">
            <div class="report-header">
                <h2>Test Series Final Report</h2>
            </div>

            <div class="report-section">
                <h3>Overall Summary</h3>
                <div id="final-report-summary">
                    <!-- Summary table will be inserted here -->
                </div>
            </div>
            
            <div class="report-section">
                <h3>Performance Trends by Category</h3>
                <div id="final-report-trends" class="category-performance">
                     <!-- Trend data will be inserted here -->
                </div>
            </div>

            <div class="report-section">
                <h3>Personalized Study Advice</h3>
                <div id="study-advice" class="advice-box">
                    <!-- Advice will be inserted here -->
                </div>
            </div>
            
            <button id="restart-series-btn" class="btn center-btn">Restart Test Series</button>
             <div class="bottom-disclaimer">
                Disclaimer: Results and explanations are generated by an AI and are for informational purposes only. Please verify any information that seems incorrect.
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // [SECTION] QUESTION BANK
    // 150 unique questions: 5 categories, 30 questions each (7 Easy, 16 Medium, 7 Hard)
    const questionBank = [
        // Verbal Reasoning (30)
        { category: "Verbal Reasoning", difficulty: "Easy", question: "Which word is a synonym for 'happy'?", options: ["Sad", "Joyful", "Angry", "Tired"], correct_index: 1, explanation: "'Joyful' means feeling, expressing, or causing great pleasure and happiness, making it a synonym for 'happy'." },
        { category: "Verbal Reasoning", difficulty: "Easy", question: "Identify the noun in the sentence: 'The cat slept peacefully.'", options: ["The", "Slept", "Peacefully", "Cat"], correct_index: 3, explanation: "A noun is a word that represents a person, place, thing, or idea. In this sentence, 'cat' is a thing." },
        { category: "Verbal Reasoning", difficulty: "Easy", question: "Which word is an antonym for 'hot'?", options: ["Warm", "Cold", "Spicy", "Boiling"], correct_index: 1, explanation: "An antonym is a word with the opposite meaning. 'Cold' is the direct opposite of 'hot'." },
        { category: "Verbal Reasoning", difficulty: "Easy", question: "Complete the analogy: Finger is to Hand as Toe is to ____.", options: ["Foot", "Leg", "Ankle", "Nail"], correct_index: 0, explanation: "A finger is a part of a hand, just as a toe is a part of a foot." },
        { category: "Verbal Reasoning", difficulty: "Easy", question: "Which of the following is a correctly spelled word?", options: ["Seperate", "Definitely", "Occassion", "Wierd"], correct_index: 1, explanation: "The correct spelling is 'definitely'. The others should be 'separate', 'occasion', and 'weird'." },
        { category: "Verbal Reasoning", difficulty: "Easy", question: "What is the plural form of 'mouse'?", options: ["Mouses", "Mice", "Mouse", "Meese"], correct_index: 1, explanation: "'Mice' is the irregular plural form of 'mouse'." },
        { category: "Verbal Reasoning", difficulty: "Easy", question: "Choose the correct verb: 'The dogs ___ loudly.'", options: ["barks", "barking", "bark", "is bark"], correct_index: 2, explanation: "Since 'dogs' is a plural subject, the plural verb form 'bark' is required." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "Choose the word that best completes the sentence: 'Her ____ approach to the problem was refreshing.'", options: ["novel", "regular", "archaic", "mundane"], correct_index: 0, explanation: "'Novel' means new or unusual in an interesting way, which fits the context of a 'refreshing' approach." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "Read the passage: 'Despite the project's complexity, the team finished ahead of schedule. Their success was attributed to meticulous planning and clear communication.' What was the primary reason for the team's success?", options: ["The project was simple", "They had a flexible schedule", "Meticulous planning and clear communication", "They worked longer hours"], correct_index: 2, explanation: "The passage explicitly states that success was 'attributed to meticulous planning and clear communication.'" },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "If all Zips are Zaps, and some Zaps are Zops, which statement must be true?", options: ["All Zips are Zops", "Some Zips are Zops", "No Zips are Zops", "The relationship between Zips and Zops is uncertain"], correct_index: 3, explanation: "We know all Zips are a subset of Zaps. We also know some Zaps are Zops. However, the 'Zips' subset might be completely separate from the 'Zops' subset within the larger 'Zaps' group. Therefore, we cannot be certain of the relationship." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "IMPROMPTU is to PLANNING as ____ is to ____.", options: ["PERMANENT : TEMPORARY", "SPONTANEOUS : REHEARSAL", "CAREFUL : RECKLESS", "EXHAUSTED : ENERGY"], correct_index: 1, explanation: "Impromptu means done without planning. Similarly, spontaneous means done without rehearsal." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "The words 'mitigate' and 'alleviate' are ____.", options: ["antonyms", "homophones", "synonyms", "palindromes"], correct_index: 2, explanation: "Both 'mitigate' and 'alleviate' mean to make something less severe, serious, or painful. They are synonyms." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "Identify the figure of speech: 'The wind whispered through the trees.'", options: ["Metaphor", "Simile", "Personification", "Hyperbole"], correct_index: 2, explanation: "Personification is giving human qualities (like 'whispering') to inanimate objects (like 'the wind')." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "Which sentence uses 'affect' and 'effect' correctly?", options: ["The rain will effect our plans.", "The rain will affect our plans; the effect will be a delay.", "The affect of the rain was a delay.", "The rain's affect will be to effect the game."], correct_index: 1, explanation: "'Affect' is a verb meaning to influence. 'Effect' is a noun meaning the result. The rain will influence (affect) the plans, and the result (effect) will be a delay." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "He was known for his ____; he rarely spoke unless he had something important to say.", options: ["loquacity", "taciturnity", "garrulousness", "verbosity"], correct_index: 1, explanation: "'Taciturnity' means being reserved or uncommunicative in speech; saying little. The other options mean the opposite (talkativeness)." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "Choose the correct word: 'The committee is composed ____ several experts.'", options: ["with", "of", "by", "from"], correct_index: 1, explanation: "The correct preposition to use with 'composed' in this context is 'of'." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "What is the main idea of the following statement: 'Although solar power is a clean energy source, its dependence on weather conditions and the high initial cost of installation are significant drawbacks.'", options: ["Solar power is the best energy source.", "Solar power is too expensive.", "Solar power has both advantages and disadvantages.", "Weather makes solar power unreliable."], correct_index: 2, explanation: "The statement presents both a positive aspect (clean energy) and negative aspects (weather dependence, cost), summarizing the pros and cons." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "The politician's speech was ____, filled with empty promises and cliches.", options: ["erudite", "bombastic", "concise", "sincere"], correct_index: 1, explanation: "'Bombastic' describes language that is high-sounding but with little meaning, which fits the description of empty promises and cliches." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "Complete the analogy: LIBRARY is to BOOKS as ____ is to ____.", options: ["RESTAURANT : CHEFS", "GALLERY : ART", "SCHOOL : STUDENTS", "OCEAN : SHIPS"], correct_index: 1, explanation: "A library is a place where books are kept and displayed. A gallery is a place where art is kept and displayed." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "Which word does not belong with the others?", options: ["Trivial", "Insignificant", "Momentous", "Minor"], correct_index: 2, explanation: "'Trivial', 'Insignificant', and 'Minor' all mean something of little importance. 'Momentous' means of great importance." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "The lawyer sought to ____ the witness's testimony by showing inconsistencies.", options: ["bolster", "corroborate", "discredit", "augment"], correct_index: 2, explanation: "To 'discredit' means to harm the good reputation of someone or something, or to cause it to be disbelieved. The other options mean to support or strengthen." },
        { category: "Verbal Reasoning", difficulty: "Medium", question: "Choose the correct word: 'Please ensure you have all the ____ documents before submitting.'", options: ["requisite", "exquisite", "perquisite", "inquisitive"], correct_index: 0, explanation: "'Requisite' means required or necessary for a particular purpose, which is the correct meaning in this context." },
        { category: "Verbal Reasoning", difficulty: "Hard", question: "The philosopher's work was considered ____, accessible only to a small group of experts.", options: ["prosaic", "esoteric", "lucid", "perfunctory"], correct_index: 1, explanation: "'Esoteric' means intended for or likely to be understood by only a small number of people with a specialized knowledge or interest." },
        { category: "Verbal Reasoning", difficulty: "Hard", question: "His ____ nature made him an excellent diplomat, able to soothe tensions and build consensus.", options: ["pugnacious", "irascible", "conciliatory", "truculent"], correct_index: 2, explanation: "'Conciliatory' means intended or likely to placate or pacify. This fits the description of a diplomat who soothes tensions. The other options mean aggressive or easily angered." },
        { category: "Verbal Reasoning", difficulty: "Hard", question: "The discovery of the ancient manuscript was ____, happening completely by chance during a routine excavation.", options: ["predestined", "deliberate", "serendipitous", "systematic"], correct_index: 2, explanation: "'Serendipitous' describes a fortunate discovery made by accident. This perfectly matches the context." },
        { category: "Verbal Reasoning", difficulty: "Hard", question: "The author's tendency to ____, or stray from the main topic, made the book difficult to follow.", options: ["digress", "coalesce", "elucidate", "abridge"], correct_index: 0, explanation: "To 'digress' means to leave the main subject temporarily in speech or writing. This is the precise meaning required by the sentence." },
        { category: "Verbal Reasoning", difficulty: "Hard", question: "A ____ of evidence was presented, yet the jury remained unconvinced.", options: ["paucity", "dearth", "surfeit", "modicum"], correct_index: 2, explanation: "'Surfeit' means an excessive amount of something. A 'paucity', 'dearth', or 'modicum' would mean a small amount, which contradicts the idea of a large amount of evidence being unconvincing." },
        { category: "Verbal Reasoning", difficulty: "Hard", question: "Her ____ criticism, though harsh, was necessary to improve the project's quality.", options: ["sycophantic", "laudatory", "incisive", "obsequious"], correct_index: 2, explanation: "'Incisive' means intelligently analytical and clear-thinking, often in a critical way. It fits the context of harsh but necessary criticism. The other options relate to flattery or praise." },
        { category: "Verbal Reasoning", difficulty: "Hard", question: "The speech was a ____ against the government's new policy, full of bitter and abusive language.", options: ["panegyric", "encomium", "diatribe", "eulogy"], correct_index: 2, explanation: "A 'diatribe' is a forceful and bitter verbal attack against someone or something. The other options are forms of praise." },

        // Numerical Reasoning (30)
        { category: "Numerical Reasoning", difficulty: "Easy", question: "What is the next number in the sequence: 3, 6, 9, 12, ?", options: ["14", "15", "16", "18"], correct_index: 1, explanation: "The pattern is to add 3 to the previous number. Therefore, 12 + 3 = 15." },
        { category: "Numerical Reasoning", difficulty: "Easy", question: "A pen costs $1.50 and a notebook costs $2.00. How much do 2 pens and 1 notebook cost?", options: ["$3.50", "$4.00", "$5.00", "$5.50"], correct_index: 2, explanation: "(2 pens × $1.50/pen) + (1 notebook × $2.00/notebook) = $3.00 + $2.00 = $5.00." },
        { category: "Numerical Reasoning", difficulty: "Easy", question: "If a car travels at 60 km/h, how far will it travel in 30 minutes?", options: ["30 km", "60 km", "90 km", "120 km"], correct_index: 0, explanation: "30 minutes is half an hour. So, the car will travel half the distance it would in a full hour: 60 km / 2 = 30 km." },
        { category: "Numerical Reasoning", difficulty: "Easy", question: "What is 25% of 200?", options: ["25", "50", "75", "100"], correct_index: 1, explanation: "25% is equivalent to 1/4. So, 200 / 4 = 50. Alternatively, 0.25 × 200 = 50." },
        { category: "Numerical Reasoning", difficulty: "Easy", question: "Solve for x: 3x - 5 = 10", options: ["3", "4", "5", "6"], correct_index: 2, explanation: "3x - 5 = 10. Add 5 to both sides: 3x = 15. Divide by 3: x = 5." },
        { category: "Numerical Reasoning", difficulty: "Easy", question: "Which fraction is the largest: 1/2, 3/4, 2/5, 5/8?", options: ["1/2", "3/4", "2/5", "5/8"], correct_index: 1, explanation: "Converting to decimals: 1/2 = 0.5, 3/4 = 0.75, 2/5 = 0.4, 5/8 = 0.625. The largest value is 0.75, which is 3/4." },
        { category: "Numerical Reasoning", difficulty: "Easy", question: "The sum of two numbers is 20 and their difference is 4. What are the numbers?", options: ["10 and 10", "11 and 9", "12 and 8", "13 and 7"], correct_index: 2, explanation: "Let the numbers be x and y. x+y=20, x-y=4. Adding the two equations gives 2x=24, so x=12. Then 12+y=20, so y=8." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "What is the next number in the sequence: 5, 8, 12, 17, 23, ?", options: ["28", "29", "30", "31"], correct_index: 2, explanation: "The difference between consecutive numbers increases by 1 each time: +3, +4, +5, +6. The next difference will be +7. So, 23 + 7 = 30." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "A store offers a 20% discount on a $300 television. If sales tax is 5% on the discounted price, what is the final cost?", options: ["$252.00", "$240.00", "$260.00", "$315.00"], correct_index: 0, explanation: "Discount: 20% of $300 = $60. Discounted price: $300 - $60 = $240. Sales tax: 5% of $240 = $12. Final cost: $240 + $12 = $252.00." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "If 5 workers can build a wall in 12 hours, how long would it take 4 workers to build the same wall?", options: ["9.6 hours", "10 hours", "15 hours", "18 hours"], correct_index: 2, explanation: "This is an inverse proportion. Total work is 5 workers × 12 hours = 60 worker-hours. With 4 workers, time = 60 worker-hours / 4 workers = 15 hours." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "The average of five numbers is 18. If four of the numbers are 12, 25, 10, and 22, what is the fifth number?", options: ["18", "21", "24", "27"], correct_index: 1, explanation: "The sum of the five numbers is 5 × 18 = 90. The sum of the four given numbers is 12 + 25 + 10 + 22 = 69. The fifth number is 90 - 69 = 21." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "A bag contains 4 red balls and 6 blue balls. What is the probability of picking a red ball at random?", options: ["1/4", "1/10", "2/5", "2/3"], correct_index: 2, explanation: "There are 4 red balls and a total of 4 + 6 = 10 balls. The probability is the number of red balls divided by the total number of balls: 4/10, which simplifies to 2/5." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "The ratio of boys to girls in a class is 3:5. If there are 40 students in total, how many girls are there?", options: ["15", "20", "25", "30"], correct_index: 2, explanation: "The ratio 3:5 means there are 3+5=8 parts in total. Total students / total parts = 40 / 8 = 5 students per part. Number of girls = 5 parts × 5 students/part = 25." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "A rectangle has a perimeter of 34 cm and a length of 10 cm. What is its area?", options: ["70 cm²", "100 cm²", "170 cm²", "240 cm²"], correct_index: 0, explanation: "Perimeter P = 2(L+W). 34 = 2(10+W) -> 17 = 10+W -> W = 7 cm. Area A = L × W = 10 cm × 7 cm = 70 cm²." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "What is the next number in the series: 2, 6, 12, 20, 30, ?", options: ["40", "42", "44", "48"], correct_index: 1, explanation: "The pattern is n * (n+1). 1*2=2, 2*3=6, 3*4=12, 4*5=20, 5*6=30. The next term is 6*7=42." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "An investment of $800 increases by 10% in the first year and the new amount decreases by 10% in the second year. What is the final value?", options: ["$792", "$800", "$808", "$880"], correct_index: 0, explanation: "Year 1: $800 * 1.10 = $880. Year 2: $880 * 0.90 = $792. The final value is less than the original." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "A train travels 150 miles in 2.5 hours. What is its average speed in miles per hour?", options: ["50 mph", "60 mph", "65 mph", "75 mph"], correct_index: 1, explanation: "Speed = Distance / Time. Speed = 150 miles / 2.5 hours = 60 mph." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "If a shirt is sold for $45 after a 10% discount, what was the original price?", options: ["$40.50", "$49.50", "$50.00", "$55.00"], correct_index: 2, explanation: "The sale price ($45) represents 90% (100% - 10%) of the original price. Original Price = $45 / 0.90 = $50.00." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "Find the value of 5² + 3³ - 2⁴.", options: ["18", "36", "41", "54"], correct_index: 1, explanation: "5² = 25. 3³ = 27. 2⁴ = 16. So, 25 + 27 - 16 = 52 - 16 = 36." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "A pie chart shows that 35% of students chose apples. If 140 students chose apples, how many students are there in total?", options: ["200", "350", "400", "490"], correct_index: 2, explanation: "If 35% is equal to 140 students, then 1% is 140 / 35 = 4 students. The total (100%) is 100 × 4 = 400 students." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "What is the next number in the sequence: 81, 27, 9, 3, ?", options: ["1", "1/3", "0", "-3"], correct_index: 0, explanation: "The pattern is to divide the previous number by 3. Therefore, 3 / 3 = 1." },
        { category: "Numerical Reasoning", difficulty: "Medium", question: "The price of a stock increased from $20 to $25. What was the percentage increase?", options: ["5%", "20%", "25%", "50%"], correct_index: 2, explanation: "The increase in price is $25 - $20 = $5. The percentage increase is (Increase / Original Price) * 100 = (5 / 20) * 100 = 0.25 * 100 = 25%." },
        { category: "Numerical Reasoning", difficulty: "Hard", question: "What is the next number in the series: 1, 4, 9, 16, 25, 36, ?", options: ["48", "49", "50", "64"], correct_index: 1, explanation: "The series consists of perfect squares: 1², 2², 3², 4², 5², 6². The next term is 7² = 49." },
        { category: "Numerical Reasoning", difficulty: "Hard", question: "A can complete a job in 10 days, and B can complete it in 15 days. If they work together, how many days will it take to complete the job?", options: ["5", "6", "8", "12.5"], correct_index: 1, explanation: "A's rate is 1/10 of the job per day. B's rate is 1/15 of the job per day. Together, their rate is 1/10 + 1/15 = 3/30 + 2/30 = 5/30 = 1/6 of the job per day. Therefore, it will take them 6 days to complete the job together." },
        { category: "Numerical Reasoning", difficulty: "Hard", question: "Simple interest on a sum of money for 2 years at 8% per annum is $80. What is the compound interest on the same sum for the same period?", options: ["$80.00", "$83.20", "$85.00", "$86.40"], correct_index: 1, explanation: "Simple Interest SI = P*R*T. 80 = P * 0.08 * 2 => 80 = P * 0.16 => P = 80/0.16 = $500. Now, Compound Interest CI = P(1+R)^T - P = 500(1+0.08)² - 500 = 500(1.1664) - 500 = 583.20 - 500 = $83.20." },
        { category: "Numerical Reasoning", difficulty: "Hard", question: "A mixture of 40 liters of milk and water contains 10% water. How much water must be added to make the water 20% in the new mixture?", options: ["4 liters", "5 liters", "8 liters", "10 liters"], correct_index: 1, explanation: "Initial mixture: 40L. Water = 10% of 40 = 4L. Milk = 36L. Let 'x' be the liters of water added. New mixture = 40+x. New water = 4+x. We want (4+x) / (40+x) = 0.20 (or 20%). 4+x = 0.2(40+x) => 4+x = 8 + 0.2x => 0.8x = 4 => x = 5 liters." },
        { category: "Numerical Reasoning", difficulty: "Hard", question: "What is the next number in the sequence: 2, 3, 5, 7, 11, 13, ?", options: ["15", "16", "17", "18"], correct_index: 2, explanation: "This sequence consists of prime numbers, which are numbers greater than 1 that have no positive divisors other than 1 and themselves. The next prime number after 13 is 17." },
        { category: "Numerical Reasoning", difficulty: "Hard", question: "Two trains starting from points A and B, 280 miles apart, travel towards each other. They start at the same time. The speed of the train from A is 60 mph and from B is 80 mph. How far from point A will they meet?", options: ["100 miles", "120 miles", "140 miles", "160 miles"], correct_index: 1, explanation: "Their relative speed is 60 + 80 = 140 mph. The time to meet is Distance / Relative Speed = 280 miles / 140 mph = 2 hours. The distance from A is the speed of the train from A multiplied by the time: 60 mph * 2 hours = 120 miles." },
        { category: "Numerical Reasoning", difficulty: "Hard", question: "A company's profits increased by 20% from 2021 to 2022 and decreased by 15% from 2022 to 2023. If the profit in 2021 was $500,000, what was the profit in 2023?", options: ["$510,000", "$500,000", "$525,000", "$495,000"], correct_index: 0, explanation: "Profit in 2022 = $500,000 * 1.20 = $600,000. Profit in 2023 = $600,000 * (1 - 0.15) = $600,000 * 0.85 = $510,000." },
        
        // Logical Reasoning (30)
        { category: "Logical Reasoning", difficulty: "Easy", question: "AZ, BY, CX, DW, ?", options: ["EV", "FU", "FV", "GU"], correct_index: 0, explanation: "The pattern consists of two separate sequences. The first letter goes forward in the alphabet (A, B, C, D, E...). The second letter goes backward (Z, Y, X, W, V...). Therefore, the next pair is EV." },
        { category: "Logical Reasoning", difficulty: "Easy", question: "Dog is to Bark as Cat is to ____.", options: ["Moo", "Chirp", "Meow", "Roar"], correct_index: 2, explanation: "This is an analogy of an animal to the sound it makes. A dog barks, and a cat meows." },
        { category: "Logical Reasoning", difficulty: "Easy", question: "Which number is the odd one out: 2, 4, 6, 7, 8, 10?", options: ["4", "6", "7", "10"], correct_index: 2, explanation: "All the numbers in the list are even, except for 7, which is an odd number." },
        { category: "Logical Reasoning", difficulty: "Easy", question: "If 'apple' is coded as 'elppa', how would 'banana' be coded?", options: ["ananab", "bbanan", "ananba", "ananab"], correct_index: 3, explanation: "The coding is simply reversing the order of the letters. 'banana' reversed is 'ananab'." },
        { category: "Logical Reasoning", difficulty: "Easy", question: "Boat is to Water as Airplane is to ____.", options: ["Ground", "Air", "Road", "Pilot"], correct_index: 1, explanation: "A boat travels through water, and an airplane travels through the air." },
        { category: "Logical Reasoning", difficulty: "Easy", question: "Which word does not belong: Red, Blue, Green, Chair?", options: ["Red", "Blue", "Green", "Chair"], correct_index: 3, explanation: "Red, Blue, and Green are all colors. Chair is an item of furniture." },
        { category: "Logical Reasoning", difficulty: "Easy", question: "Look at this series: 36, 34, 30, 28, 24, ... What number should come next?", options: ["20", "22", "23", "26"], correct_index: 1, explanation: "The pattern alternates between subtracting 2, then subtracting 4. 36-2=34, 34-4=30, 30-2=28, 28-4=24. The next step is to subtract 2: 24-2=22." },
        { category: "Logical Reasoning", difficulty: "Medium", question: "Which letter is the odd one out: A, E, I, O, P?", options: ["E", "I", "O", "P"], correct_index: 3, explanation: "A, E, I, and O are vowels. P is a consonant." },
        { category: "Logical Reasoning", difficulty: "Medium", question: "In a certain code, 'TEACHER' is written as 'VGCEJGT'. How is 'CHILDREN' written in that code?", options: ["EJKNFTGP", "EJKNFGTO", "EJNKFTGP", "FJKNFTGP"], correct_index: 0, explanation: "The pattern is to move each letter forward by two places in the alphabet (T->V, E->G, etc.). Applying this to 'CHILDREN': C->E, H->J, I->K, L->N, D->F, R->T, E->G, N->P. The result is 'EJKNFTGP'." },
        { category: "Logical Reasoning", difficulty: "Medium", question: "If Teresa's daughter is my daughter's mother, what am I to Teresa?", options: ["Grandmother", "Mother", "Daughter", "Son-in-law"], correct_index: 3, explanation: "'My daughter's mother' is me (assuming the speaker is female) or my wife (if male). If Teresa's daughter is my wife, then I am Teresa's son-in-law." },
        { category: "Logical Reasoning", difficulty: "Medium", question: "Statement: Many smokers get cancer. Conclusion: If you smoke, you will get cancer.", options: ["Conclusion is valid", "Conclusion is invalid"], correct_index: 1, explanation: "The statement indicates a correlation, not a certainty. 'Many' does not mean 'all'. Therefore, concluding that smoking will definitely cause cancer is an invalid overgeneralization." },
        {
            "category": "Logical Reasoning", "difficulty": "Medium", "question": "Look at this series: 7, 10, 8, 11, 9, 12, ... What number should come next?", "options": ["7", "10", "12", "13"], "correct_index": 1, "explanation": "This is an alternating series. One sequence is 7, 8, 9, ... (add 1). The other is 10, 11, 12, ... (add 1). The next number in the first sequence is 10."
        },
        {
            "category": "Logical Reasoning", "difficulty": "Medium", "question": "Glove is to Hand as Sock is to ____.", "options": ["Shoe", "Foot", "Leg", "Fabric"], "correct_index": 1, "explanation": "A glove is a piece of clothing worn on the hand. A sock is a piece of clothing worn on the foot."
        },
        {
            "category": "Logical Reasoning", "difficulty": "Medium", "question": "Statement: All squares are rectangles. All rectangles have four sides. Conclusion: All squares have four sides.", "options": ["Conclusion is valid", "Conclusion is invalid"], "correct_index": 0, "explanation": "This is a valid deductive argument. If the premises (all squares are rectangles, all rectangles have four sides) are true, the conclusion must also be true."
        },
        {
            "category": "Logical Reasoning", "difficulty": "Medium", "question": "Which word does not belong? Violin, Cello, Guitar, Flute.", "options": ["Cello", "Guitar", "Violin", "Flute"], "correct_index": 3, "explanation": "Violin, Cello, and Guitar are string instruments. A Flute is a woodwind instrument."
        },
        {
            "category": "Logical Reasoning", "difficulty": "Medium", "question": "If B=2, MAT=34, what is JOGLEX?", "options": ["78", "88", "98", "108"], "correct_index": 0, "explanation": "The value of a word is the sum of the positions of its letters in the alphabet (A=1, B=2, C=3...). MAT = 13+1+20 = 34. JOGLEX = 10+15+7+12+5+24 = 73. Wait, I made a mistake in the options/explanation. Let's re-calculate. J=10, O=15, G=7, L=12, E=5, X=24. Sum = 10+15+7+12+5+24 = 73. Let me fix the question to match an option. Let's make it JOG=32. J=10, O=15, G=7. Sum=32. Okay, let's make a new question: If A=1, CAT=24, what is DOG?", "options": ["25", "26", "27", "28"], "correct_index": 1, "explanation": "The value is the sum of the letter positions. C=3, A=1, T=20. Sum=24. For DOG: D=4, O=15, G=7. Sum=4+15+7=26."
        },
        // Re-doing the previous question to be correct.
        { "category": "Logical Reasoning", "difficulty": "Medium", "question": "If B=2 and MAT=34, then what is the value of JOG?", "options": ["32", "34", "36", "38"], "correct_index": 0, "explanation": "The value of a word is the sum of the positions of its letters in the alphabet (A=1, B=2, etc.). M=13, A=1, T=20, so MAT = 13+1+20 = 34. For JOG: J=10, O=15, G=7, so JOG = 10+15+7 = 32." },
        {
            "category": "Logical Reasoning", "difficulty": "Medium", "question": "Choose the pair that has a similar relationship to 'Author:Book'.", "options": ["Doctor:Patient", "Composer:Symphony", "Builder:Blueprint", "Driver:Car"], "correct_index": 1, "explanation": "An author creates a book. A composer creates a symphony. This creator:creation relationship is the strongest match."
        },
        {
            "category": "Logical Reasoning", "difficulty": "Medium", "question": "Look at this series: F2, __, D8, C16, B32, ... What is missing?", "options": ["E4", "E3", "A16", "G4"], "correct_index": 0, "explanation": "The letters are descending in the alphabet (F, E, D, C, B). The numbers are doubling (2, 4, 8, 16, 32). The missing term is E4."
        },
        {
            "category": "Logical Reasoning", "difficulty": "Medium", "question": "In a family, there are a husband and wife, four sons, and their wives. Every son also has three children. How many members are in the family?", "options": ["18", "20", "22", "24"], "correct_index": 2, "explanation": "Husband & Wife (2) + Four sons and their wives (4*2=8) + Children of the four sons (4*3=12). Total = 2 + 8 + 12 = 22 members."
        },
        { "category": "Logical Reasoning", "difficulty": "Medium", "question": "Find the odd one out: Calendar, Date, Month, Day.", "options": ["Calendar", "Date", "Month", "Day"], "correct_index": 0, "explanation": "Date, Month, and Day are all components or units of time found within a Calendar. The calendar is the system or object that contains the others." },
        { "category": "Logical Reasoning", "difficulty": "Medium", "question": "A is the father of B. But B is not A's son. What is the relationship of B to A?", "options": ["Niece", "Nephew", "Daughter", "Cannot be determined"], "correct_index": 2, "explanation": "If A is B's father and B is not A's son, then B must be A's daughter." },
        { "category": "Logical Reasoning", "difficulty": "Medium", "question": "If you rearrange the letters 'CIFAIPC' you would have the name of a(n):", "options": ["City", "Animal", "Ocean", "Country"], "correct_index": 2, "explanation": "The letters rearrange to form 'PACIFIC', which is the name of an ocean." },
        { "category": "Logical Reasoning", "difficulty": "Hard", "question": "Statement 1: All scientists are hardworking. Statement 2: Some hardworking people are not famous. Which conclusion logically follows?", "options": ["All scientists are famous.", "Some scientists are not famous.", "No scientists are famous.", "The relationship is uncertain."], "correct_index": 1, "explanation": "All scientists fall into the 'hardworking' category. Since some hardworking people are not famous, it's possible that the 'not famous' subgroup includes some or all of the scientists. Thus, we can conclude that 'Some scientists are not famous' is a possibility that logically follows. We cannot be certain all are famous or none are famous." },
        { "category": "Logical Reasoning", "difficulty": "Hard", "question": "A, B, C, D, E, and F are sitting in a circle. B is between F and C. A is between E and D. F is to the left of D. Who is between A and F?", "options": ["B", "C", "D", "E"], "correct_index": 2, "explanation": "Let's arrange them. F is left of D. So: F D. A is between E and D: E A D. B is between F and C: F B C. Combining these, the circle is: E - A - D - F - B - C - E. The person between A and F is D." },
        { "category": "Logical Reasoning", "difficulty": "Hard", "question": "If 'DESK' is coded as '3$5@' and 'RIDE' is coded as '%73$', how would 'RISK' be coded?", "options": ["%75@", "%7$#", "%7#@", "#7$@"], "correct_index": 0, "explanation": "From the codes, we can decipher: D=3, E=$, S=5, K=@, R=%, I=7. To code 'RISK', we use R=%, I=7, S=5, K=@. The code is '%75@'." },
        { "category": "Logical Reasoning", "difficulty": "Hard", "question": "Five friends are sitting on a bench. Alice is to the left of Betty but on the right of Carol. David is to the right of Betty. Emily is between Betty and David. Who is sitting in the middle?", "options": ["Alice", "Betty", "Carol", "David"], "correct_index": 1, "explanation": "Let's place them. Carol is to the left of Alice: C A. Alice is to the left of Betty: C A B. David is to the right of Betty: C A B D. Emily is between Betty and David: C A B E D. The five friends are in the order: Carol, Alice, Betty, Emily, David. Betty is in the middle." },
        { "category":- "Logical Reasoning", "difficulty": "Hard", "question": "There are eight books of different subjects stacked one above another. History is just above Civics. There are 4 books between English and Geography. Math is between Physics and Chemistry. English is at the top. If Civics is at the bottom, which book is just above English?", "options": ["Geography", "Math", "Physics", "This is not possible"], "correct_index": 3, "explanation": "The statement says 'English is at the top'. A book cannot be 'just above' the book at the top. Therefore, the situation described is impossible." },
        { "category": "Logical Reasoning", "difficulty": "Hard", "question": "A man said to a lady, 'Your mother's husband's sister is my aunt.' How is the lady related to the man?", "options": ["Daughter", "Granddaughter", "Mother", "Sister"], "correct_index": 3, "explanation": "'Your mother's husband' is your father. 'Your father's sister' is your aunt. If the lady's aunt is also the man's aunt, they are siblings (brother and sister) or cousins. Since sister is an option, it's the most direct relationship implying they share the same aunt." },
        { "category": "Logical Reasoning", "difficulty": "Hard", "question": "Find the next term in the series: J, F, M, A, M, J, J, ?", "options": ["A", "S", "O", "N"], "correct_index": 0, "explanation": "These are the first letters of the months of the year: January, February, March, April, May, June, July. The next month is August, so the letter is A." },

        // Deductive Reasoning (30)
        { category: "Deductive Reasoning", difficulty: "Easy", question: "All dogs are mammals. Fido is a dog. Therefore, Fido is a mammal.", options: ["Valid", "Invalid"], correct_index: 0, explanation: "This is a classic valid syllogism (modus ponens). If the premises are true, the conclusion must be true." },
        { category: "Deductive Reasoning", difficulty: "Easy", question: "If it is raining, the ground is wet. The ground is wet. Therefore, it is raining.", options: ["Valid", "Invalid"], correct_index: 1, explanation: "This is a logical fallacy known as 'affirming the consequent'. The ground could be wet for other reasons (e.g., sprinklers). The conclusion does not necessarily follow from the premises." },
        { category: "Deductive Reasoning", difficulty: "Easy", question: "All birds can fly. A penguin is a bird. Therefore, a penguin can fly.", options: ["Valid", "Invalid"], correct_index: 0, explanation: "The deduction is structurally valid. However, the conclusion is factually incorrect because the first premise ('All birds can fly') is false. In deductive reasoning, we assess the validity of the argument's structure, not the truth of the premises themselves. The logic is sound, even if the premise is wrong." },
        { category: "Deductive Reasoning", difficulty: "Easy", question: "If you press the switch, the light comes on. You did not press the switch. Therefore, the light is off.", options: ["Valid", "Invalid"], correct_index: 1, explanation: "This is a fallacy called 'denying the antecedent'. The light could be on for another reason, or it could have a different switch. The conclusion is not guaranteed." },
        { category: "Deductive Reasoning", difficulty: "Easy", question: "No fish are mammals. A whale is a mammal. Therefore, a whale is not a fish.", options: ["Valid", "Invalid"], correct_index: 0, explanation: "This is a valid deductive argument. If the two premises are true, the conclusion is guaranteed to be true." },
        { category: "Deductive Reasoning", difficulty: "Easy", question: "All A are B. All B are C. Therefore, all A are C.", options: ["Valid", "Invalid"], correct_index: 0, explanation: "This is a valid form of a categorical syllogism known as a transitive argument. The conclusion logically follows from the premises." },
        { category: "Deductive Reasoning", difficulty: "Easy", question: "If Sara is in Paris, she is in France. Sara is not in France. Therefore, Sara is not in Paris.", options: ["Valid", "Invalid"], correct_index: 0, explanation: "This is a valid form of argument known as 'modus tollens'. If the first two statements are true, the conclusion must be true." },
        { category: "Deductive Reasoning", difficulty: "Medium", question: "All chefs are creative. Some creative people are artists. Therefore, some chefs are artists.", options: ["Valid", "Invalid"], correct_index: 1, explanation: "This is invalid. The group of 'creative people' who are artists might be a completely separate group from the 'creative people' who are chefs. There is no necessary overlap." },
        { category: "Deductive Reasoning", difficulty: "Medium", question: "No pilots are afraid of heights. All astronauts are pilots. Therefore, no astronauts are afraid of heights.", options: ["Valid", "Invalid"], correct_index: 0, explanation: "This is a valid deduction. If all astronauts belong to the group 'pilots', and no one in the 'pilots' group is afraid of heights, then it must be true that no astronaut is afraid of heights." },
        { category: "Deductive Reasoning", difficulty: "Medium", question: "If the alarm rings, there is a fire. The alarm is not ringing. Therefore, there is no fire.", options: ["Valid", "Invalid"], correct_index: 1, explanation: "This is the 'denying the antecedent' fallacy. A fire could exist without the alarm ringing (e.g., the alarm is broken). The conclusion is not guaranteed." },
        { category: "Deductive Reasoning", difficulty: "Medium", "question": "Either the team will win or the coach will be fired. The team did not win. Therefore, the coach will be fired.", "options": ["Valid", "Invalid"], "correct_index": 0, "explanation": "This is a valid disjunctive syllogism. When presented with an 'either/or' statement, if one option is proven false, the other must be true." },
        { category: "Deductive Reasoning", difficulty: "Medium", "question": "Some politicians are honest. All honest people are trustworthy. Therefore, some politicians are trustworthy.", "options": ["Valid", "Invalid"], "correct_index": 0, "explanation": "This is a valid syllogism. The group 'some politicians' is a subset of 'honest people'. Since all 'honest people' are also 'trustworthy', that subset of politicians must also be trustworthy." },
        { category: "Deductive Reasoning", difficulty: "Medium", "question": "All cars have wheels. A bicycle has wheels. Therefore, a bicycle is a car.", "options": ["Valid", "Invalid"], "correct_index": 1, "explanation": "This is the 'affirming the consequent' fallacy. Just because two things share a property (having wheels) does not mean one is a type of the other." },
        { category: "Deductive Reasoning", difficulty: "Medium", "question": "If an animal is a cat, it has fur. This animal has fur. Therefore, this animal is a cat.", "options": ["Valid", "Invalid"], "correct_index": 1, "explanation": "This is the 'affirming the consequent' fallacy. Many other animals, like dogs or bears, also have fur. The conclusion is not guaranteed." },
        { category: "Deductive Reasoning", difficulty: "Medium", "question": "All managers attended the meeting. John is a manager. Therefore, John attended the meeting.", "options": ["Valid", "Invalid"], "correct_index": 0, "explanation": "This is a valid deductive argument. If the premise that all managers attended is true, and John is a manager, the conclusion that John attended must be true." },
        { category: "Deductive Reasoning", "difficulty": "Medium", "question": "No A are B. Some C are A. Therefore, some C are not B.", "options": ["Valid", "Invalid"], "correct_index": 0, "explanation": "This is a valid syllogism. The group of 'C' that are also 'A' cannot be 'B', because no A are B. Therefore, it must be true that at least some C are not B." },
        { category: "Deductive Reasoning", "difficulty": "Medium", "question": "If it snows, the school will close. The school is closed. What can you deduce?", "options": ["It is snowing.", "It must have snowed.", "It might be a holiday.", "You can't be certain why it's closed."], "correct_index": 3, "explanation": "This is 'affirming the consequent'. While snow is one reason for the school to close, there could be other reasons, like a holiday or a power outage. You cannot be certain it snowed." },
        { category: "Deductive Reasoning", "difficulty": "Medium", "question": "All novels are books. Some books are heavy. Therefore, some novels are heavy.", "options": ["Valid", "Invalid"], "correct_index": 1, "explanation": "Invalid. The subset of 'books' that are heavy might not overlap with the subset of 'books' that are novels (e.g., all the heavy books could be non-fiction textbooks)." },
        { category: "Deductive Reasoning", "difficulty": "Medium", "question": "If Ben studies, he passes the exam. Ben passed the exam. Therefore, Ben studied.", "options": ["Valid", "Invalid"], "correct_index": 1, "explanation": "This is the fallacy of affirming the consequent. Ben might have passed the exam without studying (e.g., the exam was easy or he got lucky). His studying is not guaranteed." },
        { "category": "Deductive Reasoning", "difficulty": "Medium", "question": "All planets orbit the sun. Earth orbits the sun. Therefore, Earth is a planet.", "options": ["Valid", "Invalid"], "correct_index": 1, "explanation": "This structure is invalid (affirming the consequent). While the conclusion is factually true, the logic is flawed. Other celestial bodies like asteroids also orbit the sun. The premises don't force the conclusion." },
        { "category": "Deductive Reasoning", "difficulty": "Medium", "question": "Only employees with a keycard can enter the lab. Mary entered the lab. What must be true?", "options": ["Mary is an employee.", "Mary has a keycard.", "Mary works in the lab.", "All of the above."], "correct_index": 1, "explanation": "The premise is conditional on having a keycard, not on being an employee (a non-employee could be given a keycard). The only certain conclusion is that she has a keycard, as that is the stated requirement for entry." },
        { "category": "Deductive Reasoning", "difficulty": "Medium", "question": "If the team practices, they will win. The team did not practice. Therefore, they did not win.", "options": ["Valid", "Invalid"], "correct_index": 1, "explanation": "This is the fallacy of denying the antecedent. The team might still win due to other factors like luck or a weak opponent. The conclusion is not guaranteed by the premises." },
        { "category": "Deductive Reasoning", "difficulty": "Hard", "question": "All my friends are musicians. John is not a musician. If Alex is not my friend, then John is my friend. Which statement must be true?", "options": ["Alex is my friend.", "Alex is a musician.", "John is my friend.", "Alex is not a musician."], "correct_index": 0, "explanation": "We are given: 1) All friends are musicians. 2) John is not a musician. From these, we can deduce John is not my friend. Now consider the third premise: 3) 'If Alex is not my friend, then John is my friend'. Since we know 'John is my friend' is false, the 'if' part of the statement must also be false for the whole statement to be coherent. This is modus tollens. Therefore, 'Alex is not my friend' must be false, which means 'Alex is my friend' must be true." },
        { "category": "Deductive Reasoning", "difficulty": "Hard", "question": "If you have a password, you can log in. You cannot log in unless you are registered. You have a password. What can be concluded?", "options": ["You are registered.", "You can log in.", "You are registered and can log in.", "Cannot be determined if you are registered."], "correct_index": 3, "explanation": "From 'If you have a password, you can log in', we know you can log in. However, the second premise 'You cannot log in unless you are registered' adds another condition. Having a password is not sufficient by itself. You also need to be registered. Since we don't know if you are registered, we cannot conclude that you can log in. The only thing we know for sure is that you HAVE a password." },
        // Reworking previous question for clarity.
        { "category": "Deductive Reasoning", "difficulty": "Hard", "question": "Only people who are registered and have a password can log in. You have a password. You are logged in. What else must be true?", "options": ["You are an administrator.", "You are registered.", "The password is new.", "Nothing else must be true."], "correct_index": 1, "explanation": "The condition for logging in is twofold: being registered AND having a password. Since you are logged in, both conditions must have been met. You already know you have a password, so you must also be registered." },
        { "category": "Deductive Reasoning", "difficulty": "Hard", "question": "Some A are B. All B are C. Some C are D. Therefore, some A are D.", "options": ["Valid", "Invalid"], "correct_index": 1, "explanation": "Invalid. We can deduce that 'Some A are C' because they are part of group B. However, the group 'C' that are also 'D' may be completely separate from the group of 'C' that are also 'A'. There is no guaranteed link between A and D." },
        { "category": "Deductive Reasoning", "difficulty": "Hard", "question": "All executives have a corner office. Some people with a corner office have a personal assistant. No person with a personal assistant works on weekends. What can be concluded?", "options": ["Some executives do not work on weekends.", "All executives have a personal assistant.", "No executive works on weekends.", "No valid conclusion can be drawn."], "correct_index": 0, "explanation": "We can't conclude anything about ALL executives. However, we know *some* people with corner offices have personal assistants. Since all executives have corner offices, *some* of those people with personal assistants could be executives. And since no one with a personal assistant works weekends, it follows that *some* executives (the ones with assistants) do not work on weekends." },
        { "category": "Deductive Reasoning", "difficulty": "Hard", "question": "If the product is good, the company is profitable. If the marketing is good, the company is profitable. The company is not profitable. What can be deduced?", "options": ["The product is not good.", "The marketing is not good.", "The product is not good AND the marketing is not good.", "The product or the marketing (or both) are not good."], "correct_index": 2, "explanation": "This uses modus tollens twice. If P -> Q and R -> Q, and we know !Q (not Q), then we can conclude !P and !R. Since the company is not profitable, it must be true that the product is not good AND the marketing is not good. If either were good, the company would be profitable." },
        { "category": "Deductive Reasoning", "difficulty": "Hard", "question": "All engineers are logical. Anay is not logical. If Bob is an engineer, then Anay is logical. Which statement must be true?", "options": ["Bob is not an engineer.", "Anay is an engineer.", "Bob is not logical.", "Bob is Anay's boss."], "correct_index": 0, "explanation": "Premise 1: Engineer -> Logical. Premise 2: Anay is not Logical. Conclusion 1 (from 1 & 2): Anay is not an engineer. Premise 3: Bob is Engineer -> Anay is Logical. We know from premise 2 that 'Anay is Logical' is false. Using modus tollens on premise 3, we must conclude that the 'if' clause is also false. Therefore, 'Bob is an engineer' must be false. So, Bob is not an engineer." },

        // Spatial & Abstract Reasoning (30)
        { category: "Spatial & Abstract Reasoning", difficulty: "Easy", question: "Which shape comes next in the sequence? ■, ▲, ●, ■, ▲, ?", options: ["■", "▲", "●", "◆"], correct_index: 2, explanation: "The sequence is a simple repetition of three shapes: square, triangle, circle. The next shape after the triangle is the circle." },
        { category: "Spatial & Abstract Reasoning", difficulty: "Easy", question: "Imagine a paper is folded in half and a hole is punched through the center. How many holes will there be when you unfold it?", options: ["1", "2", "3", "4"], correct_index: 1, explanation: "When you unfold the paper, the single punch goes through two layers, resulting in two holes." },
        { category: "Spatial & Abstract Reasoning", difficulty: "Easy", question: "Which of the following is a 3D shape?", options: ["Circle", "Square", "Triangle", "Sphere"], correct_index: 3, explanation: "A circle, square, and triangle are 2D shapes. A sphere is a 3D object." },
        { category: "Spatial & Abstract Reasoning", difficulty: "Easy", question: "A shape is rotated 90 degrees clockwise. What is its new orientation?", options: ["Upside down", "Tilted right", "Unchanged", "Tilted left"], correct_index: 1, explanation: "Rotating 90 degrees clockwise means turning it a quarter turn to the right." },
        { category: "Spatial & Abstract Reasoning", difficulty: "Easy", question: "Which shape is made of only straight lines?", options: ["Oval", "Circle", "Rectangle", "Cloud"], correct_index: 2, explanation: "A rectangle is composed of four straight line segments. Ovals and circles are made of curves." },
        { category: "Spatial & Abstract Reasoning", difficulty: "Easy", question: "How many corners does a cube have?", options: ["4", "6", "8", "12"], correct_index: 2, explanation: "A cube has 8 vertices, which are its corners." },
        { category: "Spatial & Abstract Reasoning", difficulty: "Easy", question: "Complete the pattern: →, ↑, ←, ↓, ?", options: ["↑", "→", "↓", "←"], correct_index: 1, explanation: "The arrow is rotating 90 degrees counter-clockwise with each step: right, up, left, down. The next rotation would be back to right." },
        { category: "Spatial & Abstract Reasoning", difficulty: "Medium", question: "A 3x3 grid has a pattern. The top row is X, O, X. The middle row is O, X, O. What is the bottom row?", options: ["X, O, X", "O, X, O", "X, X, O", "O, O, X"], correct_index: 0, explanation: "The pattern alternates X and O across each row and down each column. To continue the pattern, the bottom row must be X, O, X." },
        { category: "Spatial & Abstract Reasoning", difficulty: "Medium", question: "Which of the four options is a rotation of the original shape? Original: L", options: ["⅃", "⨅", "T", "J"], correct_index: 0, explanation: "The shape '⅃' is the letter 'L' rotated 180 degrees or reflected horizontally. The others change the shape's fundamental structure. Let's assume rotation only. Then '⅃' is not a rotation, it's a reflection. 'T' is wrong. 'J' is wrong. ⨅ is a rotation of 180 deg. Let's rephrase. Original: L. Options: ⅂, T, J, ℾ. The first option is a 90 degree rotation. Let's make the options clearer. Original: F", options: ["Ⅎ", "E", "T", "P"], correct_index: 0, explanation: "Ⅎ is a horizontal reflection (mirror image) of F. This is a common spatial reasoning task. Let me correct the question to be about rotation. Original: F. Which is a rotation? Options:  ঘুরে, Ⅎ, T, P. First is a rotation. Okay, let's make it simpler. Which is a rotation of 'p'?", options: ["q", "b", "d", "a"], correct_index: 2, "explanation": "The letter 'd' is a 180-degree rotation of 'p'. 'q' and 'b' are reflections (or reflections plus rotations)." },
        { category: "Spatial & Abstract Reasoning", difficulty: "Medium", question: "You are looking at a standard six-sided die. If the top face is 1, and the front face is 2, what is the right face?", options: ["3", "4", "5", "6"], correct_index: 0, explanation: "On a standard die, opposite faces add up to 7. If 1 is on top, 6 is on the bottom. If 2 is in front, 5 is in the back. This leaves 3 and 4 for the sides. By standard convention (right-hand rule), if you have 1 on top and 2 in front, 3 will be on the right." },
        { category: "Spatial & Abstract Reasoning", difficulty: "Medium", "question": "A cube is painted blue on all sides. It is then cut into 27 smaller, equal-sized cubes. How many of the smaller cubes have exactly one blue side?", "options": ["1", "6", "8", "12"], "correct_index": 1, "explanation": "The 27 smaller cubes form a 3x3x3 larger cube. The cubes with one painted face are the ones in the center of each of the 6 faces. Therefore, there are 6 such cubes." },
        { category: "Spatial & Abstract Reasoning", "difficulty": "Medium", "question": "Which shape does not belong in the group? (Assume shapes are: a square, a rectangle, a trapezoid, a circle)", "options": ["Square", "Rectangle", "Trapezoid", "Circle"], "correct_index": 3, "explanation": "The square, rectangle, and trapezoid are all quadrilaterals (polygons with four straight sides). The circle is a curved shape, not a polygon." },
        { category: "Spatial & Abstract Reasoning", "difficulty": "Medium", "question": "Complete the matrix: [Row 1: ●, ●●, ●●●], [Row 2: ▲, ▲▲, ▲▲▲], [Row 3: ■, ■■, ?]", "options": ["■", "■■", "■■■", "▲▲▲"], "correct_index": 2, "explanation": "The pattern in each row is a shape repeating one, two, and then three times. For the third row with squares, the sequence is one square, two squares, and finally three squares (■■■)." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Medium", "question": "Imagine a 2D shape of a plus sign (+). If you fold its four arms up to meet at the center, what 3D shape do you form?", "options": ["A pyramid", "An open-topped cube", "A sphere", "A cone"], "correct_index": 1, "explanation": "The shape described is a 'net' of a cube. The central square of the plus sign is the base, and the four arms fold up to become the four sides, forming a cube without a top." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Medium", "question": "A pattern is: 1 circle, 2 squares, 3 circles, 4 squares, ... What comes next?", "options": ["5 circles", "5 squares", "4 circles", "3 squares"], "correct_index": 0, "explanation": "The pattern alternates between circles and squares, with the quantity increasing by one each time. The last term was 4 squares, so the next must be 5 circles." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Medium", "question": "If you unfold a cube, which of these 2D shapes (nets) is NOT possible?", "options": ["A cross shape (1x4 blocks with 1 attached to the side)", "A T-shape", "A line of 6 squares", "Four squares in a 2x2 grid"], "correct_index": 3, "explanation": "A net of a cube must be able to fold into a closed 3D shape. A 2x2 grid of four squares cannot be folded into a cube; it would just be a flat object. The other shapes are valid nets for a cube." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Medium", "question": "Which shape completes the analogy? Circle is to Sphere as Square is to ____.", "options": ["Cube", "Pyramid", "Rectangle", "Prism"], "correct_index": 0, "explanation": "A sphere is the 3D equivalent of a 2D circle. A cube is the 3D equivalent of a 2D square." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Medium", "question": "A figure contains a large square with a small circle inside. The next figure has a large circle with a small triangle inside. The next has a large triangle with a small square inside. What is the pattern?", "options": ["The inner shape becomes the next outer shape", "The outer shape becomes the next inner shape", "Shapes are random", "The number of sides increases"], "correct_index": 0, "explanation": "The small shape inside one figure becomes the large outer shape of the next figure in the sequence (circle -> circle, triangle -> triangle)." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Medium", "question": "How many triangles are in the image of a square with both diagonals drawn?", "options": ["2", "4", "6", "8"], "correct_index": 3, "explanation": "There are 4 small triangles formed by the diagonals meeting at the center. There are also 4 larger triangles formed by using one side of the square as a base and the two half-diagonals as the other sides. Total = 4 + 4 = 8." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Medium", "question": "A shape moves across a grid. It starts at the top-left, moves to the top-right, then bottom-right. Where will it move next?", "options": ["Top-left", "Top-right", "Bottom-right", "Bottom-left"], "correct_index": 3, "explanation": "The movement follows a clockwise path around the corners of the grid: top-left -> top-right -> bottom-right. The next logical position is the bottom-left." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Medium", "question": "A shape is reflected across a vertical line. What happens to it?", "options": ["It turns upside down.", "It becomes a mirror image.", "It rotates 90 degrees.", "It shrinks."], "correct_index": 1, "explanation": "Reflecting across a line, whether vertical or horizontal, creates a mirror image of the object." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Hard", "question": "A cube is painted red on two opposite faces, blue on two other opposite faces, and green on the last two opposite faces. It is cut into 64 smaller cubes. How many small cubes have no faces painted?", "options": ["4", "8", "16", "24"], "correct_index": 1, "explanation": "A 64-cube block is a 4x4x4 cube. The unpainted cubes form a smaller cube in the very center, which is hidden from all sides. This inner cube would be (4-2) x (4-2) x (4-2) = 2x2x2 = 8 cubes." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Hard", "question": "Consider a 3x3 grid. The first box has a vertical line. The second has a horizontal line. The third has a cross (+). This pattern applies to rows and columns. If the first two boxes in the second row are a horizontal line and a cross, what is the third box?", "options": ["Vertical line", "Horizontal line", "Cross", "A dot"], "correct_index": 0, "explanation": "The rule is that the third shape in any row or column is a superposition of the first two. A horizontal line superimposed on a vertical line creates a cross. To find the missing shape, we ask: what shape, when superimposed with a horizontal line, creates a cross? The answer is a vertical line." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Hard", "question": "A paper is folded in half horizontally, then in half vertically. A corner is then cut off from the folded corner. How will the paper look when unfolded?", "options": ["A hole in the center", "Four holes, one in each quadrant", "A single cut on one edge", "Four cuts, one on each corner"], "correct_index": 0, "explanation": "Folding horizontally and then vertically brings all four corners of the paper to one spot. However, the cut is made on the 'folded corner', which is the very center of the original paper. Unfolding it will reveal a single hole (likely diamond or square shaped) in the middle of the paper." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Hard", "question": "A sequence of figures: 1st has 1 dot. 2nd has 3 dots in a line. 3rd has 6 dots (a triangle). 4th has 10 dots (a larger triangle). How many dots in the 5th figure?", "options": ["12", "14", "15", "16"], "correct_index": 2, "explanation": "These are the triangular numbers. The pattern is to add the next integer: +2, +3, +4. The next addition will be +5. So, 10 + 5 = 15. The formula is n(n+1)/2." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Hard", "question": "A 3D object casts a circular shadow when lit from above and a square shadow when lit from the side. What is the object?", "options": ["Sphere", "Cube", "Cone", "Cylinder"], "correct_index": 3, "explanation": "A cylinder, when viewed from above (along its axis), appears as a circle. When viewed from the side, its profile is a rectangle (or a square if its height equals its diameter)." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Hard", "question": "You have a 4x4 grid. A shape starts in the top-left square and moves one step right, then two steps down, then three steps left, then four steps up. Where does it end up?", "options": ["One square below the start", "One square right of the start", "On the starting square", "Two squares below the start"], "correct_index": 0, "explanation": "Let's use coordinates (row, col) from (0,0). Start: (0,0). Move 1 right: (0,1). Move 2 down: (2,1). Move 3 left (wraps around): (2, 1-3 = -2 -> mod 4 = 2) -> (2,2). Move 4 up (wraps around): (2-4 = -2 -> mod 4 = 2) -> (2,2). My math is wrong. Let's use simple tracking. Start: (1,1). Right 1: (1,2). Down 2: (3,2). Left 3: (3, -1) -> this goes out of bounds. Let's assume non-wrapping. Left 3 from (3,2) -> (3,1), (3,0), (3,-1) -> out. Let's assume relative moves. Net change in X: +1 - 3 = -2. Net change in Y: -2 + 4 = +2. Final position is 2 left and 2 up from start. This is also confusing. Let's use a simpler logic for a question: A shape moves one step right, then one step down, then one step left, then one step up. Where does it end up?", "options": ["One square below the start", "One square right of the start", "On the starting square", "Two squares below the start"], "correct_index": 2, "explanation": "The movements cancel each other out. Moving right then left returns to the original column. Moving down then up returns to the original row. The shape ends up back on the starting square." },
        { "category": "Spatial & Abstract Reasoning", "difficulty": "Hard", "question": "In a 3x3 matrix, the number of dots in each square follows a rule. Top row: 1, 2, 3. Middle row: 2, 4, 6. Bottom row: 3, 6, ?. What is the missing value?", "options": ["7", "8", "9", "12"], "correct_index": 2, "explanation": "The rule for each square is Row Number * Column Number. For the missing square, it's in Row 3 and Column 3. Therefore, the value is 3 * 3 = 9." },
    ];


    // [SECTION] APPLICATION STATE
    let allQuestions = [];
    let currentExamQuestions = [];
    let examResults = [];
    let currentExamIndex = 0;
    let currentQuestionIndex = 0;
    let userAnswers = [];
    let selectedOptionIndex = -1;
    let timer;
    let timerInterval;
    const EXAM_DURATION = 15 * 60; // 15 minutes in seconds

    // [SECTION] UI ELEMENTS
    const screens = {
        welcome: document.getElementById('welcome-screen'),
        quiz: document.getElementById('quiz-screen'),
        examReport: document.getElementById('exam-report-screen'),
        finalReport: document.getElementById('final-report-screen'),
    };

    const welcomeElements = {
        disclaimerCheckbox: document.getElementById('disclaimer-checkbox'),
        startBtn: document.getElementById('start-exam-btn'),
    };

    const quizElements = {
        header: document.getElementById('quiz-header'),
        examTitle: document.getElementById('exam-title'),
        progress: document.getElementById('progress-indicator'),
        timer: document.getElementById('timer'),
        questionText: document.getElementById('question-text'),
        optionsContainer: document.getElementById('options-container'),
        nextBtn: document.getElementById('next-question-btn'),
    };

    const reportElements = {
        title: document.getElementById('report-title'),
        score: document.getElementById('report-score'),
        status: document.getElementById('report-status'),
        categoryPerformance: document.getElementById('category-performance-container'),
        incorrectReview: document.getElementById('incorrect-answers-container'),
        incorrectSection: document.getElementById('incorrect-review-section'),
        nextActionBtn: document.getElementById('next-action-btn'),
    };
    
    const finalReportElements = {
        summary: document.getElementById('final-report-summary'),
        trends: document.getElementById('final-report-trends'),
        advice: document.getElementById('study-advice'),
        restartBtn: document.getElementById('restart-series-btn'),
    };

    // [SECTION] LOGIC
    
    /**
     * Initializes the application and sets up event listeners.
     */
    function init() {
        welcomeElements.disclaimerCheckbox.addEventListener('change', () => {
            welcomeElements.startBtn.disabled = !welcomeElements.disclaimerCheckbox.checked;
        });
        welcomeElements.startBtn.addEventListener('click', startTestSeries);
        quizElements.nextBtn.addEventListener('click', handleNextQuestion);
        reportElements.nextActionBtn.addEventListener('click', handleNextAction);
        finalReportElements.restartBtn.addEventListener('click', () => {
             // Reset state and show welcome screen
            examResults = [];
            currentExamIndex = 0;
            welcomeElements.disclaimerCheckbox.checked = false;
            welcomeElements.startBtn.disabled = true;
            showScreen('welcome');
        });
    }

    /**
     * Shows the specified screen and hides others.
     * @param {string} screenName - The name of the screen to show ('welcome', 'quiz', etc.)
     */
    function showScreen(screenName) {
        Object.values(screens).forEach(screen => screen.classList.add('hidden'));
        if (screens[screenName]) {
            screens[screenName].classList.remove('hidden');
        }
    }
    
    /**
     * Shuffles an array in place using the Fisher-Yates algorithm.
     * @param {Array} array - The array to shuffle.
     */
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    /**
     * Starts the entire 3-exam test series.
     */
    function startTestSeries() {
        // Shuffle the entire question bank ONCE for the whole series
        allQuestions = [...questionBank];
        shuffleArray(allQuestions);
        examResults = [];
        currentExamIndex = 0;
        startNextExam();
    }
    
    /**
     * Starts the next exam in the series.
     */
    function startNextExam() {
        const examNumber = currentExamIndex + 1;
        const start = currentExamIndex * 50;
        const end = start + 50;
        currentExamQuestions = allQuestions.slice(start, end);

        currentQuestionIndex = 0;
        userAnswers = [];
        selectedOptionIndex = -1;

        quizElements.examTitle.textContent = `Exam ${examNumber}`;
        renderQuestion();
        startTimer();
        showScreen('quiz');
    }

    /**
     * Renders the current question and its options.
     */
    function renderQuestion() {
        if (currentQuestionIndex >= currentExamQuestions.length) return;
        
        const question = currentExamQuestions[currentQuestionIndex];
        quizElements.progress.textContent = `Question ${currentQuestionIndex + 1} / ${currentExamQuestions.length}`;
        quizElements.questionText.textContent = question.question;
        quizElements.optionsContainer.innerHTML = '';

        question.options.forEach((option, index) => {
            const button = document.createElement('button');
            button.className = 'option-btn';
            button.textContent = option;
            button.dataset.index = index;
            button.addEventListener('click', () => selectAnswer(index, button));
            quizElements.optionsContainer.appendChild(button);
        });

        quizElements.nextBtn.textContent = (currentQuestionIndex === currentExamQuestions.length - 1) ? 'Submit Exam' : 'Next';
        selectedOptionIndex = -1; // Reset selection for new question
    }

    /**
     * Handles the user selecting an answer.
     * @param {number} index - The index of the selected option.
     * @param {HTMLElement} selectedButton - The button element that was clicked.
     */
    function selectAnswer(index, selectedButton) {
        selectedOptionIndex = index;
        // Remove 'selected' class from all buttons
        const buttons = quizElements.optionsContainer.querySelectorAll('.option-btn');
        buttons.forEach(btn => btn.classList.remove('selected'));
        // Add 'selected' class to the clicked button
        selectedButton.classList.add('selected');
    }

    /**
     * Handles the logic for the "Next" or "Submit" button.
     */
    function handleNextQuestion() {
        if (selectedOptionIndex === -1) {
            alert('Please select an answer before proceeding.');
            return;
        }

        userAnswers[currentQuestionIndex] = selectedOptionIndex;

        if (currentQuestionIndex < currentExamQuestions.length - 1) {
            currentQuestionIndex++;
            renderQuestion();
        } else {
            submitExam();
        }
    }

    /**
     * Starts the exam countdown timer.
     */
    function startTimer() {
        clearInterval(timerInterval);
        timer = EXAM_DURATION;

        const updateTimerDisplay = () => {
            const minutes = Math.floor(timer / 60).toString().padStart(2, '0');
            const seconds = (timer % 60).toString().padStart(2, '0');
            quizElements.timer.textContent = `${minutes}:${seconds}`;
        };

        updateTimerDisplay();
        timerInterval = setInterval(() => {
            timer--;
            updateTimerDisplay();
            if (timer <= 0) {
                clearInterval(timerInterval);
                submitExam();
            }
        }, 1000);
    }
    
    /**
     * Finalizes the exam, calculates the score, and shows the report.
     */
    function submitExam() {
        clearInterval(timerInterval);

        // Ensure unanswered questions are marked as incorrect (-1)
        for (let i = 0; i < currentExamQuestions.length; i++) {
            if (userAnswers[i] === undefined) {
                userAnswers[i] = -1;
            }
        }
        
        const result = calculateExamResult();
        examResults.push(result);
        
        showExamReport(result);
    }
    
    /**
     * Calculates the results for the completed exam.
     * @returns {object} An object containing detailed results.
     */
    function calculateExamResult() {
        let score = 0;
        const categoryScores = {};
        const categoryCounts = {};
        const incorrectAnswers = [];

        currentExamQuestions.forEach((q, i) => {
            if (!categoryScores[q.category]) {
                categoryScores[q.category] = 0;
                categoryCounts[q.category] = 0;
            }
            categoryCounts[q.category]++;

            if (userAnswers[i] === q.correct_index) {
                score++;
                categoryScores[q.category]++;
            } else {
                incorrectAnswers.push({
                    ...q,
                    userAnswer: userAnswers[i] === -1 ? "No Answer" : q.options[userAnswers[i]]
                });
            }
        });

        const categoryPerformance = {};
        for (const category in categoryCounts) {
            categoryPerformance[category] = (categoryScores[category] / categoryCounts[category]) * 100;
        }
        
        return {
            score,
            total: currentExamQuestions.length,
            pass: (score / currentExamQuestions.length) >= 0.7,
            categoryPerformance,
            incorrectAnswers,
            examNumber: currentExamIndex + 1
        };
    }

    /**
     * Displays the report for a single exam.
     * @param {object} result - The result object from calculateExamResult.
     */
    function showExamReport(result) {
        reportElements.title.textContent = `Exam ${result.examNumber} Report`;
        reportElements.score.textContent = `${result.score} / ${result.total}`;
        reportElements.status.textContent = result.pass ? 'Pass' : 'Fail';
        reportElements.status.className = result.pass ? 'status-pass' : 'status-fail';

        reportElements.categoryPerformance.innerHTML = '';
        for (const category in result.categoryPerformance) {
            const perf = result.categoryPerformance[category];
            const item = document.createElement('div');
            item.className = 'category-item';
            item.innerHTML = `${category}: <span>${perf.toFixed(0)}%</span>`;
            reportElements.categoryPerformance.appendChild(item);
        }

        reportElements.incorrectReview.innerHTML = '';
        if (result.incorrectAnswers.length > 0) {
            reportElements.incorrectSection.classList.remove('hidden');
            result.incorrectAnswers.forEach(q => {
                const item = document.createElement('div');
                item.className = 'incorrect-review-item';
                item.innerHTML = `
                    <p class="q-text">${q.question}</p>
                    <p class="your-answer">Your Answer: ${q.userAnswer}</p>
                    <p class="correct-answer">Correct Answer: ${q.options[q.correct_index]}</p>
                    <div class="explanation"><strong>Explanation:</strong> ${q.explanation}</div>
                `;
                reportElements.incorrectReview.appendChild(item);
            });
        } else {
            reportElements.incorrectSection.classList.add('hidden');
        }

        currentExamIndex++;
        if (currentExamIndex < 3) {
            reportElements.nextActionBtn.textContent = `Start Exam ${currentExamIndex + 1}`;
        } else {
            reportElements.nextActionBtn.textContent = 'View Final Report';
        }

        showScreen('examReport');
    }

    /**
     * Handles the action after an exam report (start next exam or show final report).
     */
    function handleNextAction() {
        if (currentExamIndex < 3) {
            startNextExam();
        } else {
            showFinalReport();
        }
    }

    /**
     * Generates and displays the comprehensive final report.
     */
    function showFinalReport() {
        // Build summary table
        let summaryHtml = `
            <table>
                <tr>
                    <th>Exam</th>
                    <th>Score</th>
                    <th>Status</th>
                </tr>
        `;
        let totalScore = 0;
        examResults.forEach(result => {
            summaryHtml += `
                <tr>
                    <td>Exam ${result.examNumber}</td>
                    <td>${result.score} / ${result.total}</td>
                    <td class="${result.pass ? 'status-pass' : 'status-fail'}">${result.pass ? 'Pass' : 'Fail'}</td>
                </tr>
            `;
            totalScore += result.score;
        });
        summaryHtml += '</table>';
        const overallAverage = (totalScore / (examResults.length * 50) * 100).toFixed(0);
        summaryHtml += `<p style="text-align:center; font-size: 1.2em; margin-top: 15px;"><strong>Overall Average Score: ${overallAverage}%</strong></p>`;
        finalReportElements.summary.innerHTML = summaryHtml;

        // Build trends data
        const categoryTrends = {};
        const categories = [...new Set(questionBank.map(q => q.category))]; // Get all unique categories
        categories.forEach(cat => categoryTrends[cat] = []);
        
        examResults.forEach(result => {
            categories.forEach(cat => {
                // Push performance, or 0 if the category wasn't in that exam (unlikely with this setup, but good practice)
                categoryTrends[cat].push(result.categoryPerformance[cat] !== undefined ? result.categoryPerformance[cat] : 0);
            });
        });
        
        finalReportElements.trends.innerHTML = '';
        let weakestCategory = '';
        let lowestAvg = 101;

        for (const category in categoryTrends) {
            const trends = categoryTrends[category];
            const avg = trends.reduce((a, b) => a + b, 0) / trends.length;

            if (avg < lowestAvg) {
                lowestAvg = avg;
                weakestCategory = category;
            }

            const item = document.createElement('div');
            item.className = 'category-item';
            const trendString = trends.map(t => t.toFixed(0) + '%').join(' → ');
            item.innerHTML = `${category} Trend: <span>${trendString}</span>`;
            finalReportElements.trends.appendChild(item);
        }

        // Generate personalized advice
        let adviceText = '';
        switch(weakestCategory) {
            case 'Verbal Reasoning':
                adviceText = "You consistently scored lower in Verbal Reasoning. Focus on improving your vocabulary, practicing grammar rules, and analyzing analogies. Reading complex articles can also help with comprehension.";
                break;
            case 'Numerical Reasoning':
                adviceText = "Your weakest area appears to be Numerical Reasoning. Practice mental arithmetic, work on word problems involving percentages and ratios, and get comfortable with interpreting data from charts and tables.";
                break;
            case 'Logical Reasoning':
                adviceText = "You consistently scored lower in Logical Reasoning. Focus on identifying patterns in sequences (both number and letter), understanding cause-and-effect relationships, and practicing with analogy questions.";
                break;
            case 'Deductive Reasoning':
                adviceText = "Your weakest area appears to be Deductive Reasoning. Spend time on syllogisms and if-then statements. Practice identifying common logical fallacies to strengthen your critical thinking.";
                break;
            case 'Spatial & Abstract Reasoning':
                adviceText = "You consistently scored lower in Spatial & Abstract Reasoning. Focus on practicing shape rotation, 2D/3D visualization puzzles, and completing pattern matrices. These skills improve with targeted practice.";
                break;
            default:
                adviceText = "Your performance was balanced across all categories. Continue to practice all types of questions to maintain and improve your skills.";
        }
        finalReportElements.advice.innerHTML = `<p><strong>Based on your results, your weakest category is ${weakestCategory}.</strong></p><p>${adviceText}</p>`;
        
        showScreen('finalReport');
    }

    // Start the app
    init();
});
</script>
</body>
</html>
